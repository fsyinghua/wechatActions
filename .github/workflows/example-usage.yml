# 示例：使用GitHub企业微信通知Action
name: 企业微信通知示例

# 监听的事件
on:
  push:
    branches: [ main, master ]
  pull_request:
    types: [ opened, synchronize, closed ]
  issues:
    types: [ opened, edited, closed, reopened ]
  release:
    types: [ published, created, edited, deleted ]

# 任务配置
jobs:
  notify-wechat:
    runs-on: ubuntu-latest
    name: 发送企业微信通知
    steps:
      # 步骤1：检出代码（如果需要访问仓库内容）
      - name: 检出代码
        uses: actions/checkout@v3
        with:
          fetch-depth: 1
      
      # 步骤2：使用我们的企业微信通知Action
      - name: 发送通知到企业微信
        uses: fsyinghua/wechatActions@v1
        with:
          # 使用GitHub Secrets存储敏感的Webhook URL
          wechat_webhook_url: ${{ secrets.WECHAT_WEBHOOK_URL }}
          # 可选：指定需要通知的事件类型
          event_types: push,pull_request,issues,release